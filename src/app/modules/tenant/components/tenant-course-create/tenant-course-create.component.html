<app-dashboard-header prevRouterLink="../">コース</app-dashboard-header>
<mat-card>
  <form [formGroup]="fg" (ngSubmit)="onSub()">
    <mat-card-content>
      <p>
        <mat-form-field appearance="fill" hintLabel="40文字">
          <mat-label>タイトル</mat-label>
          <input type="text" name="title" max="40" formControlName="title" matInput>
        </mat-form-field>
      </p>

      <mat-grid-list [cols]="5" [rowHeight]="80" formArrayName="courses">
        <ng-container *ngFor="let item of courseFormArray.controls; let index = index" [formGroupName]="index">
          <mat-grid-tile [colspan]="1"></mat-grid-tile>
          <mat-grid-tile [colspan]="2">
            <mat-form-field appearance="fill">
              <mat-label>時間</mat-label>
              <input type="text" [name]="'head-' + (index + 1)" formControlName="head" matInput>
            </mat-form-field>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="2">
            <mat-form-field appearance="fill">
              <mat-label>料金</mat-label>
              <input type="text" [name]="'data-' + (index + 1)" formControlName="data" matInput>
            </mat-form-field>
          </mat-grid-tile>
        </ng-container>
      </mat-grid-list>

      <p *ngIf="courseFormArray.length < formArrayMax">
        <button type="button" mat-flat-button color="accent" (click)="onPush()">項目を追加</button>
      </p>

      <p>
        <mat-form-field appearance="fill" hintLabel="500文字">
          <mat-label>備考</mat-label>
          <textarea rows="3" type="text" maxlength="500" name="note" formControlName="note" matInput
                    [cdkTextareaAutosize]="true"></textarea>
        </mat-form-field>
      </p>

    </mat-card-content>
    <mat-card-actions align="end">
      <button mat-raised-button color="primary" [disabled]="fg.invalid">作成</button>
    </mat-card-actions>
  </form>
</mat-card>
